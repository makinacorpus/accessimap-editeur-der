
<form class="toolbox">

    <div class="main-level">

        <!-- editing modes -->
        <div class="btn-group">
            <a 
                ng-click="$ctrl.enableEditionMode('default')" 
                ng-class="{ 'active' : $ctrl.mode == 'default' }" 
                class="btn btn-default active">
                <span class="fa fa-mouse-pointer" aria-hidden="true"></span> 
                Consulter
            </a>
            <a 
                ng-click="$ctrl.enableEditionMode('undo')" 
                ng-class="{ 'active' : $ctrl.mode == 'undo', 'disabled' : !$ctrl.deletedFeature }" 
                class="btn btn-default">
                <span class="fa fa-undo" aria-hidden="true"></span> 
                Annuler
            </a>
        </div>

        <div class="btn-group">
           <a 
                ng-click="$ctrl.enableEditionMode('point')" 
                ng-class="{ 'active' : $ctrl.mode == 'point' }" 
                class="btn btn-default">
                <span class="fa fa-map-marker" aria-hidden="true"></span> 
                Point
            </a>
            <a 
                ng-click="$ctrl.enableEditionMode('line')" 
                ng-class="{ 'active' : $ctrl.mode == 'line' }" 
                class="btn btn-default">
                <span class="fa fa-pencil" aria-hidden="true"></span> 
                Ligne
            </a>
            <a 
                ng-click="$ctrl.enableEditionMode('circle')" 
                ng-class="{ 'active' : $ctrl.mode == 'circle' }" 
                class="btn btn-default">
                <span class="fa fa-pencil" aria-hidden="true"></span> 
                Cercle
            </a>
            <a 
                ng-click="$ctrl.enableEditionMode('polygon')" 
                ng-class="{ 'active' : $ctrl.mode == 'polygon' }" 
                class="btn btn-default">
                <span class="fa fa-pencil" aria-hidden="true"></span> 
                Polygone
            </a>
            <a 
                ng-click="$ctrl.enableEditionMode('addtext')" 
                ng-class="{ 'active' : $ctrl.mode == 'addtext' }" 
                class="btn btn-default">
                <span class="fa fa-font" aria-hidden="true"></span> 
                Texte
            </a>
        </div>

        <!-- reset view -->
        <div class="btn-group">
            <a ng-click="$ctrl.resetView()" class="btn btn-default">
                <span class="fa fa-arrows-alt" aria-hidden="true"></span> 
                Recentrer
            </a>
        </div>
        
        <div class="btn-group pull-right">
            <a class="btn btn-default" 
                ng-class="{ 'active' : $ctrl.isMapVisible }"
                ng-click="$ctrl.showMap()">
                Carte
            </a>
            <a class="btn btn-default" 
                ng-class="{ 'active' : $ctrl.isLegendVisible }" 
                ng-click="$ctrl.showLegend()">
                Légende
            </a>
        </div>

    </div>

    <div class="sub-level form-inline">
        
        <ui-select 
            ng-show="$ctrl.mode === 'point' || $ctrl.mode === 'line' || $ctrl.mode === 'polygon' || $ctrl.mode === 'circle'" 
            ng-model="$ctrl.styleChosen" 
            ng-change="$ctrl.updatePolygonStyle()" 
            ng-disabled="disabled" 
            theme="bootstrap" 
            class="form-control style-selector" 
            style="width: 300px;">
            
            <ui-select-match placeholder="Sélectionnez un style">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="item in $ctrl.styleChoices | filter: $select.search">
                <div ng-bind-html="item.name | highlight: $select.search"></div>
                <div ng-bind-html="$ctrl.featureIcon(item, $ctrl.mode)"></div>
            </ui-select-choices>

        </ui-select>

        <ui-select 
            ng-if="$ctrl.mode === 'polygon' || $ctrl.mode === 'circle'" 
            ng-model="$ctrl.colorChosen" 
            ng-change="$ctrl.changeColor()" 
            ng-disabled="disabled" 
            theme="bootstrap" 
            class="form-control style-selector" 
            style="width: 300px;">
            
            <ui-select-match placeholder="Couleur de fond">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices 
                repeat="item in $ctrl.colors | filter: $select.search" 
                style="max-height: 500px;">
                <span 
                    style="display:inline-block;" 
                    ng-bind-html="item.name | highlight: $select.search"></span>
            </ui-select-choices>

        </ui-select>
        
        <span 
            ng-if="$ctrl.mode === 'polygon' || $ctrl.mode === 'circle'" 
            class="input-group-addon">
            Contour de forme
            <input 
                type="checkbox" 
                ng-model="$ctrl.checkboxModel.contour" 
                ng-change="$ctrl.updatePolygonStyle()">
        </span>
        
        <ui-select 
            ng-show="$ctrl.mode === 'addtext'" 
            ng-model="$ctrl.fontChosen" 
            ng-change="$ctrl.changeTextColor()" 
            theme="bootstrap" 
            class="form-control style-selector" 
            style="width: 300px;">

            <ui-select-match placeholder="Sélectionnez une police">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="item in $ctrl.fonts | filter: $select.search">
                <div ng-bind-html="item.name | highlight: $select.search"></div>
            </ui-select-choices>

        </ui-select>
    
        <ui-select 
            ng-show="$ctrl.mode === 'addtext'" 
            ng-model="$ctrl.fontColorChosen" 
            theme="bootstrap" 
            class="form-control style-selector" 
            style="width: 300px;">

            <ui-select-match placeholder="Sélectionnez une couleur">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="item in $ctrl.fontColors[$ctrl.fontChosen.color] | filter: $select.search">
                <div ng-bind-html="item.name | highlight: $select.search"></div>
            </ui-select-choices>

        </ui-select>

    </div>

</form>
