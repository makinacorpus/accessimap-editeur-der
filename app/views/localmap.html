<form class="form-inline">
  Orientation 
  <slider class="form-control" ng-model="rotationAngle" ng-change="rotateMap()" min="0" max="360"></slider>

  <button class="btn btn-success" ng-click="mapCommon()" type="button">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> Édition
  </button>
</form>

<form class="form-inline">
  <ui-select ng-model="$parent.queryChosen" ng-disabled="disabled" ng-change="changeStyle(queryChosen)" theme="bootstrap" class="form-control style-selector" style="width: 200px;">
    <ui-select-match placeholder="Sélectionnez un élément">{{$select.selected.name}}</ui-select-match>
    <ui-select-choices repeat="item in queryChoices | filter: $select.search | layerNotSelected:this.$parent.geojson | orderBy:['icon','type']">
      <i class="icon-15px fa fa-{{item.icon}}"></i>
      <i ng-if="item.type === 'point'" class="icon-15px fa fa-map-marker"></i>
      <i ng-if="item.type === 'line'" class="icon-15px fa fa-minus"></i>
      <i ng-if="item.type === 'polygon'" class="icon-15px fa fa-square-o"></i>
      <span ng-bind-html="item.name | highlight: $select.search"></span>
    </ui-select-choices>
  </ui-select>

  <ui-select ng-model="$parent.styleChosen" ng-disabled="disabled" theme="bootstrap" class="form-control style-selector" style="width: 300px;">
    <ui-select-match placeholder="Sélectionnez un style">{{$select.selected.name}}</ui-select-match>
    <ui-select-choices repeat="item in styleChoices | filter: $select.search">
      <div ng-bind-html="item.name | highlight: $select.search"></div>
      <div ng-bind-html="featureIcon(item, queryChosen.type)"></div>
    </ui-select-choices>
  </ui-select>

  <button class="btn btn-primary" ng-click="downloadData()" type="button">
    <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Ajouter à la carte
  </button>
</form>

<ul>
  <li ng-repeat="feature in geojson" class="form-inline">
    {{feature.name}}
    <slider class="form-control" ng-model="feature.simplification" ng-show="feature.geometryType !== 'point'" ng-change="simplifyFeatures(feature)" min="0" max="100"></slider>
    <ui-select ng-model="feature.style" ng-disabled="disabled" ng-change="updateFeature(feature.id, feature.style)" theme="bootstrap" class="form-control style-selector" style="width: 150px;">
      <ui-select-match placeholder="Sélectionnez un style">{{$select.selected.name}}</ui-select-match>
      <ui-select-choices repeat="item in feature.styleChoices | filter: $select.search">
        <div ng-bind-html="item.name | highlight: $select.search"></div>
        <div ng-bind-html="featureIcon(item, feature.geometryType)"></div>
      </ui-select-choices>
    </ui-select>
    <button class="btn btn-default" type="button" ng-click="removeFeature(feature.id)"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>
  </li>
</ul>

<div id="map"></div>
<div id="legend"></div>

<span us-spinner="{radius:30, width:8, length: 16}" spinner-key="spinner-1"></span>
